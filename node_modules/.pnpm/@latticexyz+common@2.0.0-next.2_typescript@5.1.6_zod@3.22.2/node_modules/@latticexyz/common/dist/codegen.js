import{a}from"./chunk-UPQEB2HW.js";import F from"path";import{parse as C,visit as d}from"@solidity-parser/parser";function q(r,t){let n=C(r),i=!1,s=[],R=[],o=[];if(d(n,{ContractDefinition({name:T}){T===t&&(i=!0)},FunctionDefinition({name:T,visibility:y,parameters:p,stateMutability:I,returnParameters:g,isConstructor:v,isFallback:P,isReceiveEther:M},u){if(u!==void 0&&u.type==="ContractDefinition"&&u.name===t)try{if(v||P||M)return;if(y==="default")throw new a("Visibility is not specified");if(y==="external"||y==="public"){R.push({name:T===null?"":T,parameters:p.map(m),stateMutability:I||"",returnParameters:g===null?[]:g.map(m)});for(let{typeName:c}of p.concat(g??[])){let k=B(c);s=s.concat(N(n,k))}}}catch(c){throw c instanceof a&&(c.message=`Function "${T}" in contract "${t}": ${c.message}`),c}},CustomErrorDefinition({name:T,parameters:y}){o.push({name:T===null?"":T,parameters:y.map(m)});for(let p of y){let I=B(p.typeName);s=s.concat(N(n,I))}}}),!i)throw new a(`Contract not found: ${t}`);return{functions:R,errors:o,symbolImports:s}}function m({name:r,typeName:t,storageLocation:n}){let i="",{name:s,stateMutability:R}=S(t);return i+=s,R!==null&&(i+=` ${R}`),n!==null&&(i+=` ${n}`),r!==null&&(i+=` ${r}`),i}function S(r){if(r===null)return{name:"",stateMutability:null};if(r.type==="ElementaryTypeName")return{name:r.name,stateMutability:r.stateMutability};if(r.type==="UserDefinedTypeName")return{name:r.namePath,stateMutability:null};if(r.type==="ArrayTypeName"){let t="";r.length?.type==="NumberLiteral"?t=r.length.number:r.length?.type==="Identifier"&&(t=r.length.name);let{name:n,stateMutability:i}=S(r.baseTypeName);return{name:`${n}[${t}]`,stateMutability:i}}else throw new a(`Invalid typeName.type ${r.type}`)}function B(r){if(r?.type==="UserDefinedTypeName")return[r.namePath.split(".")[0]];if(r?.type==="ArrayTypeName"){let t=B(r.baseTypeName);if(r.length?.type==="Identifier"){let n=r.length.name;t.push(n.split(".")[0])}return t}else return[]}function N(r,t){let n=[];for(let i of t){let s;if(d(r,{ImportDirective({path:R,symbolAliases:o}){if(o)for(let T of o){let y=T[1]||T[0];if(i===y){s={symbol:T[0],path:R};return}}}}),s)n.push(s);else throw new a(`Symbol "${i}" has no explicit import`)}return n}import L from"chalk";import l from"prettier";import W from"prettier-plugin-solidity";async function _(r,t){let n;t&&(n=await l.resolveConfig(t));try{return l.format(r,{plugins:[W],parser:"solidity-parse",printWidth:120,semi:!0,tabWidth:2,useTabs:!1,bracketSpacing:!0,...n})}catch(i){let s;return i instanceof Error?s=i.message:s=i,console.log(L.yellow(`Error during output formatting: ${s}`)),r}}async function b(r){return l.format(r,{parser:"typescript"})}import{mkdirSync as E,writeFileSync as U}from"fs";import{dirname as h}from"path";async function ie(r,t,n){let i=await _(r);E(h(t),{recursive:!0}),U(t,i),console.log(`${n}: ${t}`)}async function se(r,t,n){let i=await b(r);E(h(t),{recursive:!0}),U(t,i),console.log(`${n}: ${t}`)}function f(r){return r.replace(/\\/g,"/")}var $=`// SPDX-License-Identifier: MIT
pragma solidity >=0.8.0;

/* Autogenerated file. Do not edit manually. */`;function Y(r,t){return D("",r,t)}function A(r){let t=r.filter(n=>n!==void 0&&n!=="");return D(",",t,n=>n)}function ge({staticResourceData:r,keyTuple:t}){let n=r?"":"_tableId",i=r?"":"bytes32 _tableId",s=A(t.map(({name:T})=>T)),R=A(t.map(({name:T,typeWithLocation:y})=>`${y} ${T}`)),o=`
    bytes32[] memory _keyTuple = new bytes32[](${t.length});
    ${Y(t,(T,y)=>`_keyTuple[${y}] = ${K(T.name,T)};`)}
  `;return{_tableId:n,_typedTableId:i,_keyArgs:s,_typedKeyArgs:R,_keyTupleDefinition:o}}function x(r,t){return f("./"+F.relative("./"+t,"./"+r))}function ue(r){return w(r.map(t=>"path"in t?t:{symbol:t.symbol,path:x(t.fromPath,t.usedInPath)}))}function me(r){return w(r.map(({symbol:t,fromPath:n,usedInPath:i})=>({symbol:t,path:x(n,i)})))}function w(r){let t=new Map;for(let{symbol:i,path:s}of r)t.has(s)||t.set(s,new Set),t.get(s)?.add(i);let n=[];for(let[i,s]of t){let R=[...s].join(", ");n.push(`import { ${R} } from "${f(i)}";`)}return n.join(`
`)}function Be(r,t){let n="";return n+=t(void 0,"StoreSwitch","",void 0),r&&(n+=`
`+t("IStore _store","_store"," (using the specified store)","_store")),n}function le(r){let t=`bytes32(abi.encodePacked(bytes16("${r.namespace}"), bytes16("${r.name}")))`,n=`
    bytes32 constant _tableId = ${t};
    bytes32 constant ${r.tableIdName} = _tableId;
  `;return{hardcodedTableId:t,tableIdDefinition:n}}function K(r,{typeUnwrap:t,internalTypeId:n}){let i=t.length?`${t}(${r})`:r;if(n==="bytes32")return i;if(n.match(/^bytes\d{1,2}$/))return`bytes32(${i})`;if(n.match(/^uint\d{1,3}$/))return`bytes32(uint256(${i}))`;if(n.match(/^int\d{1,3}$/))return`bytes32(uint256(int256(${i})))`;if(n==="address")return`bytes32(uint256(uint160(${i})))`;if(n==="bool")return`_boolToBytes32(${i})`;throw new Error(`Unknown value type id ${n}`)}function H(r){return r.internalTypeId.match(/^bytes\d{1,2}$/)!==null}function fe(r){return H(r)?0:256-r.staticByteLength*8}function D(r,t,n){return t.map((i,s)=>n(i,s)+(s===t.length-1?"":r)).join(`
`)}function de(r){let t=$;return t+=Y(r,({name:n,memberNames:i})=>`
    enum ${n} {
      ${A(i)}
    }
  `),t}function _e(r){let{fields:t,keyTuple:n}=r,i="";for(let s of j([...t,...n]))i+=s;return t.some(({internalTypeId:s})=>s.match("bool"))&&(i+=`
    function _toBool(uint8 value) pure returns (bool result) {
      assembly {
        result := value
      }
    }
    `),n.some(({internalTypeId:s})=>s.match("bool"))&&(i+=`
    function _boolToBytes32(bool value) pure returns (bytes32 result) {
      assembly {
        result := value
      }
    }
    `),i}function j(r){let t=new Map,n=new Map;for(let{typeWrappingData:i,typeWrap:s,typeUnwrap:R,internalTypeId:o}of r){if(!i)continue;let{kind:T}=i;if(T==="staticArray"){let{elementType:y,staticLength:p}=i;t.set(s,V(s,y,p,o)),n.set(R,O(R,y,p,o))}}return[...t.values(),...n.values()]}function V(r,t,n,i){return`
    function ${r}(
      ${i} memory _value
    ) pure returns (
      ${t}[${n}] memory _result
    ) {
      // in memory static arrays are just dynamic arrays without the length byte
      assembly {
        _result := add(_value, 0x20)
      }
    }
  `}function O(r,t,n,i){let s=n*32;return`
    function ${r}(
      ${t}[${n}] memory _value
    ) pure returns (
      ${i} memory _result
    ) {
      _result = new ${i}(${n});
      uint256 fromPointer;
      uint256 toPointer;
      assembly {
        fromPointer := _value
        toPointer := add(_result, 0x20)
      }
      Memory.copy(fromPointer, toPointer, ${s});
    }
  `}import{SchemaType as e}from"@latticexyz/schema-type/deprecated";var De={[e.UINT8]:"RecsType.Number",[e.UINT16]:"RecsType.Number",[e.UINT24]:"RecsType.Number",[e.UINT32]:"RecsType.Number",[e.UINT40]:"RecsType.Number",[e.UINT48]:"RecsType.Number",[e.UINT56]:"RecsType.BigInt",[e.UINT64]:"RecsType.BigInt",[e.UINT72]:"RecsType.BigInt",[e.UINT80]:"RecsType.BigInt",[e.UINT88]:"RecsType.BigInt",[e.UINT96]:"RecsType.BigInt",[e.UINT104]:"RecsType.BigInt",[e.UINT112]:"RecsType.BigInt",[e.UINT120]:"RecsType.BigInt",[e.UINT128]:"RecsType.BigInt",[e.UINT136]:"RecsType.BigInt",[e.UINT144]:"RecsType.BigInt",[e.UINT152]:"RecsType.BigInt",[e.UINT160]:"RecsType.BigInt",[e.UINT168]:"RecsType.BigInt",[e.UINT176]:"RecsType.BigInt",[e.UINT184]:"RecsType.BigInt",[e.UINT192]:"RecsType.BigInt",[e.UINT200]:"RecsType.BigInt",[e.UINT208]:"RecsType.BigInt",[e.UINT216]:"RecsType.BigInt",[e.UINT224]:"RecsType.BigInt",[e.UINT232]:"RecsType.BigInt",[e.UINT240]:"RecsType.BigInt",[e.UINT248]:"RecsType.BigInt",[e.UINT256]:"RecsType.BigInt",[e.INT8]:"RecsType.Number",[e.INT16]:"RecsType.Number",[e.INT24]:"RecsType.Number",[e.INT32]:"RecsType.Number",[e.INT40]:"RecsType.Number",[e.INT48]:"RecsType.Number",[e.INT56]:"RecsType.BigInt",[e.INT64]:"RecsType.BigInt",[e.INT72]:"RecsType.BigInt",[e.INT80]:"RecsType.BigInt",[e.INT88]:"RecsType.BigInt",[e.INT96]:"RecsType.BigInt",[e.INT104]:"RecsType.BigInt",[e.INT112]:"RecsType.BigInt",[e.INT120]:"RecsType.BigInt",[e.INT128]:"RecsType.BigInt",[e.INT136]:"RecsType.BigInt",[e.INT144]:"RecsType.BigInt",[e.INT152]:"RecsType.BigInt",[e.INT160]:"RecsType.BigInt",[e.INT168]:"RecsType.BigInt",[e.INT176]:"RecsType.BigInt",[e.INT184]:"RecsType.BigInt",[e.INT192]:"RecsType.BigInt",[e.INT200]:"RecsType.BigInt",[e.INT208]:"RecsType.BigInt",[e.INT216]:"RecsType.BigInt",[e.INT224]:"RecsType.BigInt",[e.INT232]:"RecsType.BigInt",[e.INT240]:"RecsType.BigInt",[e.INT248]:"RecsType.BigInt",[e.INT256]:"RecsType.BigInt",[e.BYTES1]:"RecsType.String",[e.BYTES2]:"RecsType.String",[e.BYTES3]:"RecsType.String",[e.BYTES4]:"RecsType.String",[e.BYTES5]:"RecsType.String",[e.BYTES6]:"RecsType.String",[e.BYTES7]:"RecsType.String",[e.BYTES8]:"RecsType.String",[e.BYTES9]:"RecsType.String",[e.BYTES10]:"RecsType.String",[e.BYTES11]:"RecsType.String",[e.BYTES12]:"RecsType.String",[e.BYTES13]:"RecsType.String",[e.BYTES14]:"RecsType.String",[e.BYTES15]:"RecsType.String",[e.BYTES16]:"RecsType.String",[e.BYTES17]:"RecsType.String",[e.BYTES18]:"RecsType.String",[e.BYTES19]:"RecsType.String",[e.BYTES20]:"RecsType.String",[e.BYTES21]:"RecsType.String",[e.BYTES22]:"RecsType.String",[e.BYTES23]:"RecsType.String",[e.BYTES24]:"RecsType.String",[e.BYTES25]:"RecsType.String",[e.BYTES26]:"RecsType.String",[e.BYTES27]:"RecsType.String",[e.BYTES28]:"RecsType.String",[e.BYTES29]:"RecsType.String",[e.BYTES30]:"RecsType.String",[e.BYTES31]:"RecsType.String",[e.BYTES32]:"RecsType.String",[e.BOOL]:"RecsType.Boolean",[e.ADDRESS]:"RecsType.String",[e.UINT8_ARRAY]:"RecsType.NumberArray",[e.UINT16_ARRAY]:"RecsType.NumberArray",[e.UINT24_ARRAY]:"RecsType.NumberArray",[e.UINT32_ARRAY]:"RecsType.NumberArray",[e.UINT40_ARRAY]:"RecsType.NumberArray",[e.UINT48_ARRAY]:"RecsType.NumberArray",[e.UINT56_ARRAY]:"RecsType.BigIntArray",[e.UINT64_ARRAY]:"RecsType.BigIntArray",[e.UINT72_ARRAY]:"RecsType.BigIntArray",[e.UINT80_ARRAY]:"RecsType.BigIntArray",[e.UINT88_ARRAY]:"RecsType.BigIntArray",[e.UINT96_ARRAY]:"RecsType.BigIntArray",[e.UINT104_ARRAY]:"RecsType.BigIntArray",[e.UINT112_ARRAY]:"RecsType.BigIntArray",[e.UINT120_ARRAY]:"RecsType.BigIntArray",[e.UINT128_ARRAY]:"RecsType.BigIntArray",[e.UINT136_ARRAY]:"RecsType.BigIntArray",[e.UINT144_ARRAY]:"RecsType.BigIntArray",[e.UINT152_ARRAY]:"RecsType.BigIntArray",[e.UINT160_ARRAY]:"RecsType.BigIntArray",[e.UINT168_ARRAY]:"RecsType.BigIntArray",[e.UINT176_ARRAY]:"RecsType.BigIntArray",[e.UINT184_ARRAY]:"RecsType.BigIntArray",[e.UINT192_ARRAY]:"RecsType.BigIntArray",[e.UINT200_ARRAY]:"RecsType.BigIntArray",[e.UINT208_ARRAY]:"RecsType.BigIntArray",[e.UINT216_ARRAY]:"RecsType.BigIntArray",[e.UINT224_ARRAY]:"RecsType.BigIntArray",[e.UINT232_ARRAY]:"RecsType.BigIntArray",[e.UINT240_ARRAY]:"RecsType.BigIntArray",[e.UINT248_ARRAY]:"RecsType.BigIntArray",[e.UINT256_ARRAY]:"RecsType.BigIntArray",[e.INT8_ARRAY]:"RecsType.NumberArray",[e.INT16_ARRAY]:"RecsType.NumberArray",[e.INT24_ARRAY]:"RecsType.NumberArray",[e.INT32_ARRAY]:"RecsType.NumberArray",[e.INT40_ARRAY]:"RecsType.NumberArray",[e.INT48_ARRAY]:"RecsType.NumberArray",[e.INT56_ARRAY]:"RecsType.BigIntArray",[e.INT64_ARRAY]:"RecsType.BigIntArray",[e.INT72_ARRAY]:"RecsType.BigIntArray",[e.INT80_ARRAY]:"RecsType.BigIntArray",[e.INT88_ARRAY]:"RecsType.BigIntArray",[e.INT96_ARRAY]:"RecsType.BigIntArray",[e.INT104_ARRAY]:"RecsType.BigIntArray",[e.INT112_ARRAY]:"RecsType.BigIntArray",[e.INT120_ARRAY]:"RecsType.BigIntArray",[e.INT128_ARRAY]:"RecsType.BigIntArray",[e.INT136_ARRAY]:"RecsType.BigIntArray",[e.INT144_ARRAY]:"RecsType.BigIntArray",[e.INT152_ARRAY]:"RecsType.BigIntArray",[e.INT160_ARRAY]:"RecsType.BigIntArray",[e.INT168_ARRAY]:"RecsType.BigIntArray",[e.INT176_ARRAY]:"RecsType.BigIntArray",[e.INT184_ARRAY]:"RecsType.BigIntArray",[e.INT192_ARRAY]:"RecsType.BigIntArray",[e.INT200_ARRAY]:"RecsType.BigIntArray",[e.INT208_ARRAY]:"RecsType.BigIntArray",[e.INT216_ARRAY]:"RecsType.BigIntArray",[e.INT224_ARRAY]:"RecsType.BigIntArray",[e.INT232_ARRAY]:"RecsType.BigIntArray",[e.INT240_ARRAY]:"RecsType.BigIntArray",[e.INT248_ARRAY]:"RecsType.BigIntArray",[e.INT256_ARRAY]:"RecsType.BigIntArray",[e.BYTES1_ARRAY]:"RecsType.BigIntArray",[e.BYTES2_ARRAY]:"RecsType.BigIntArray",[e.BYTES3_ARRAY]:"RecsType.BigIntArray",[e.BYTES4_ARRAY]:"RecsType.BigIntArray",[e.BYTES5_ARRAY]:"RecsType.BigIntArray",[e.BYTES6_ARRAY]:"RecsType.BigIntArray",[e.BYTES7_ARRAY]:"RecsType.BigIntArray",[e.BYTES8_ARRAY]:"RecsType.BigIntArray",[e.BYTES9_ARRAY]:"RecsType.BigIntArray",[e.BYTES10_ARRAY]:"RecsType.BigIntArray",[e.BYTES11_ARRAY]:"RecsType.BigIntArray",[e.BYTES12_ARRAY]:"RecsType.BigIntArray",[e.BYTES13_ARRAY]:"RecsType.BigIntArray",[e.BYTES14_ARRAY]:"RecsType.BigIntArray",[e.BYTES15_ARRAY]:"RecsType.BigIntArray",[e.BYTES16_ARRAY]:"RecsType.BigIntArray",[e.BYTES17_ARRAY]:"RecsType.BigIntArray",[e.BYTES18_ARRAY]:"RecsType.BigIntArray",[e.BYTES19_ARRAY]:"RecsType.BigIntArray",[e.BYTES20_ARRAY]:"RecsType.BigIntArray",[e.BYTES21_ARRAY]:"RecsType.BigIntArray",[e.BYTES22_ARRAY]:"RecsType.BigIntArray",[e.BYTES23_ARRAY]:"RecsType.BigIntArray",[e.BYTES24_ARRAY]:"RecsType.BigIntArray",[e.BYTES25_ARRAY]:"RecsType.BigIntArray",[e.BYTES26_ARRAY]:"RecsType.BigIntArray",[e.BYTES27_ARRAY]:"RecsType.BigIntArray",[e.BYTES28_ARRAY]:"RecsType.BigIntArray",[e.BYTES29_ARRAY]:"RecsType.BigIntArray",[e.BYTES30_ARRAY]:"RecsType.BigIntArray",[e.BYTES31_ARRAY]:"RecsType.BigIntArray",[e.BYTES32_ARRAY]:"RecsType.BigIntArray",[e.BOOL_ARRAY]:"RecsType.T",[e.ADDRESS_ARRAY]:"RecsType.StringArray",[e.BYTES]:"RecsType.String",[e.STRING]:"RecsType.String"};export{q as contractToInterface,ie as formatAndWriteSolidity,se as formatAndWriteTypescript,_ as formatSolidity,b as formatTypescript,fe as getLeftPaddingBits,H as isLeftAligned,f as posixPath,w as renderAbsoluteImports,A as renderArguments,ge as renderCommonData,de as renderEnums,ue as renderImports,Y as renderList,me as renderRelativeImports,le as renderTableId,_e as renderTypeHelpers,K as renderValueTypeToBytes32,Be as renderWithStore,$ as renderedSolidityHeader,De as schemaTypesToRecsTypeStrings,x as solidityRelativeImportPath};
//# sourceMappingURL=codegen.js.map