import{execa as o}from"execa";import a from"chalk";async function n(r){let{stdout:t}=await o("forge",["config","--json"],{stdio:["inherit","pipe","pipe"],env:{FOUNDRY_PROFILE:r}});return JSON.parse(t)}async function l(r){return(await n(r)).src}async function y(r){return(await n(r)).script}async function m(r){return(await n(r)).test}async function x(r){return(await n(r)).out}async function P(r){return(await n(r)).eth_rpc_url||"http://127.0.0.1:8545"}async function O(r,t){let i={env:{FOUNDRY_PROFILE:t?.profile},stdout:"inherit",stderr:"pipe"};await(t?.silent?o("forge",r,i):s("forge",r,i))}async function w(r,t){return s("cast",r,{env:{FOUNDRY_PROFILE:t?.profile}})}async function d(r){return s("anvil",r)}async function s(r,t,i){let g=`${r} ${t.join(" ")}`;try{console.log(a.gray(`running "${g}"`));let{stdout:e}=await o(r,t,{stdout:"pipe",stderr:"pipe",...i});return e}catch(e){let c=e?.stderr||e?.message||"";throw c+=a.red(`
Error running "${g}"`),new Error(c)}}export{d as anvil,w as cast,O as forge,n as getForgeConfig,x as getOutDirectory,P as getRpcUrl,y as getScriptDirectory,l as getSrcDirectory,m as getTestDirectory};
//# sourceMappingURL=foundry.js.map