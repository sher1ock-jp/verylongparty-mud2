import{defineQuery as S,getComponentValue as m,Has as C,isComponentUpdate as T}from"@latticexyz/recs";import{useEffect as x,useState as g}from"react";function J(e,t,s){let[n,o]=g(t!=null?m(e,t):void 0);return x(()=>{if(o(t!=null?m(e,t):void 0),t==null)return;let a=S([C(e)],{runOnInit:!1}).update$.subscribe(u=>{if(T(u,e)&&u.entity===t){let[l]=u.value;o(l)}});return()=>a.unsubscribe()},[e,t]),n??s}import{useEffect as y,useState as R}from"react";var X=e=>{let[t,s]=R(e.get());return y(()=>{let n=e.observe_(()=>s(e.get()));return()=>n()},[e]),t};import{defineQuery as v}from"@latticexyz/recs";import{useEffect as h,useMemo as D,useState as k}from"react";import{useEffect as V,useState as E}from"react";import O from"fast-deep-equal";var i=e=>{let[t,s]=E(e);return V(()=>{O(e,t)||s(e)},[e]),t};import w from"fast-deep-equal";import{distinctUntilChanged as F,map as M}from"rxjs";function ie(e,t){let s=t?.updateOnValueChange??!0,n=i(e),o=D(()=>v(n,{runOnInit:!0}),[n]),[r,a]=k([...o.matching]);return h(()=>{a([...o.matching]);let u=o.update$.pipe(M(()=>[...o.matching]));s||(u=u.pipe(F((f,d)=>w(f,d))));let l=u.subscribe(f=>a(f));return()=>l.unsubscribe()},[o,s]),r}import{useEffect as P,useState as q}from"react";function me(e,t){let[s,n]=q(t);return P(()=>{let o=e.subscribe(n);return()=>o.unsubscribe()},[e]),s}import{useEffect as p,useRef as U,useState as I}from"react";function be(e){let t=U(e),[s,n]=I(e==null?{status:"idle"}:{status:"pending"});return p(()=>{e!==t.current&&(t.current=e,n(e==null?{status:"idle"}:{status:"pending"}))},[e]),p(()=>{e!=null&&Promise.allSettled([e]).then(([o])=>{e===t.current&&n(o)})},[e]),s}import{useEffect as $}from"react";import{useCallback as Q,useEffect as A,useRef as K,useState as _}from"react";function c(e){let[t,s]=_(e),n=K(!1);A(()=>(n.current=!0,()=>{n.current=!1}));let o=Q((...r)=>{n.current?s(...r):console.warn("Ignoring `setState` call because component unmounted",...r)},[]);return[t,o]}function b(e,t){let[s,n]=c([]),o=i(t);return $(()=>{e.scan(o).then(n);let r=e.subscribe(()=>{e.scan(o).then(n)},o);return()=>{r.then(a=>a())}},[o,n,e]),s}function ve(e,t){let{namespace:s,table:n,key:o}=t;return b(e,{namespace:s,table:n,key:{eq:o}})[0]}export{J as useComponentValue,X as useDeprecatedComputedValue,ie as useEntityQuery,me as useObservableValue,be as usePromise,ve as useRow,b as useRows};
//# sourceMappingURL=index.js.map